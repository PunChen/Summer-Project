# Summer-Project
最开始几天的工作没有往github上面写，本来想的是git上面只是放代码，后来商量了一下还是决定也写一下思路和过程。
### Update 2020.06.15
前几天的工作都写在这里了。
### 数据下载
这几天下载数据花了不少的时间,因为数据太大了,21号染色体的基因信息有50G.现在放到了服务器上,本地切下来一小部分用于初步的项目调试.最后在应用大数据进行关联分析.
其中dataxxx.bgen是基因数据,ukb_imp_chr_v3.sample是表形数据.后续的工作就是解析两种数据并进行关联分析.
具体的,sample是csv格式,首行存储列名,第二行存储数据类型.不同列分别存储了ID,表型,临床变量等信息.

完整的21号染色体数据中共包含487409个个体的1261158个SNPs,这里的所有.bgen文件来自所有样本的21号染色体的变异信息,每个文件包含10个SNPs.

由于染色体上的基因数据和变异太多了，存储是个大问题，所以采用压缩算法是十分有必要的，而且最好的无损的压缩算法。

现在下载好的21号染色体基因数据是经过zstd压缩的，要想解压缩，就要先了解这一种数据压缩算法。

zstd是Facebook在2016年开源的新无损压缩算法，优点是压缩率和压缩/解压缩性能都很突出。
在我们测试的文本日志压缩场景中，压缩率比gzip提高一倍，压缩性能与lz4、snappy相当甚至更好，是gzip的10倍以上。
zstd还有一个特别的功能，支持以训练方式生成字典文件，相比传统压缩方式能大大的提高小数据包的压缩率。
在过去的两年里，Linux内核、HTTP协议、以及一系列的大数据工具（包括Hadoop 3.0.0，HBase 2.0.0，Spark 2.3.0，Kafka 2.1.0）等都已经加入了对zstd的支持。
可以预见，zstd将是未来几年里会被广泛关注和应用的压缩算法。

### 环境配置
首先优化的话必不可少的是并行和高性能的数学库，并行暂时准备使用linux系统自带的pthreads和openmp，高性能数学库使用intel的mkl。

最近一直卡在intel编译器的配置上，直接一键安装了intel的parallel_studio_xe_2019，里面带有icc icpc mkl等，这里简单说一下配置过程：
首先去intel官网下载parallel_studio_xe_2019linux压缩包（会用到学生邮箱获取序列号），本地解压之后直接运行install.sh，按照提示一步步安装。
注意可能需要安装一些其他环境。
服务器上也是按照这个过程安装。
最终测试了一个vector的程序来比较g++和icpc在性能上的差异：
  ![icpcTest](https://github.com/PunChen/Summer-Project/blob/master/imgs/2020-06-12%2010-11-26%20%E7%9A%84%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png)
一个90s 一个2s，可以看到性能的提升还是十分明显的。

### Update 2020.06.24
更新了线性回归的相关知识，为基因数据的筛选打下来基础
